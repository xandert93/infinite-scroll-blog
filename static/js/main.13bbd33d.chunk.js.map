{"version":3,"sources":["reducer/actions.js","reducer/appReducer.js","contexts/GlobalContext.js","components/SinglePost.js","components/Posts.js","components/layout/Footer.js","components/layout/Header.js","components/layout/Loader.js","customHooks/useSearchChange.js","components/SearchBar.js","App.js","index.js"],"names":["SET_IS_LOADING","GET_POSTS","SEARCH_CHANGE","SET_ERR_MSG","appReducer","state","action","type","isLoading","fetchedPosts","payload","filteredPosts","urlPage","baseUrl","filter","title","body","includes","errMsg","initialState","GlobalContext","createContext","GlobalProvider","children","useReducer","dispatch","fetchPosts","a","axios","get","res","setTimeout","data","length","message","Provider","value","setIsLoading","SinglePost","postNum","className","Posts","useContext","useEffect","console","log","map","id","Footer","href","target","rel","Header","Loader","useState","showLoader","setShowLoader","document","querySelector","lastPost","querySelectorAll","myObserver","IntersectionObserver","isIntersecting","unobserve","threshold","observe","useSearchChange","searchField","setSearchField","toLowerCase","e","SearchBar","inputRef","useRef","handleSearchChange","ref","onChange","placeholder","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.13bbd33d.chunk.js","sourcesContent":["export const SET_IS_LOADING = 'SET_IS_LOADING';\r\nexport const GET_POSTS = 'GET_POSTS';\r\nexport const SEARCH_CHANGE = 'SEARCH_CHANGE';\r\nexport const SET_ERR_MSG = 'SET_ERR_MSG';\r\n","import {\r\n  SET_IS_LOADING,\r\n  GET_POSTS,\r\n  SEARCH_CHANGE,\r\n  SET_ERR_MSG,\r\n} from './actions';\r\n\r\nexport const appReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_IS_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case GET_POSTS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        fetchedPosts: [...state.fetchedPosts, ...action.payload],\r\n        filteredPosts: [...state.fetchedPosts, ...action.payload],\r\n        urlPage: state.urlPage + 1,\r\n        baseUrl: `https://jsonplaceholder.typicode.com/posts?_limit=4&_page=${\r\n          state.urlPage + 1\r\n        }`,\r\n      };\r\n    case SEARCH_CHANGE:\r\n      return {\r\n        ...state,\r\n        filteredPosts: state.fetchedPosts.filter(({ title, body }) => {\r\n          return (\r\n            title.includes(action.payload) || body.includes(action.payload)\r\n          );\r\n        }),\r\n      };\r\n    case SET_ERR_MSG:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        fetchedPosts: [],\r\n        errMsg: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { createContext, useReducer } from 'react';\r\nimport { appReducer } from '../reducer/appReducer';\r\n\r\nimport {\r\n  GET_POSTS,\r\n  SET_ERR_MSG,\r\n  SET_IS_LOADING,\r\n  UPDATE_URL,\r\n} from '../reducer/actions';\r\nimport axios from 'axios';\r\n\r\nlet initialState = {\r\n  urlPage: 1,\r\n  baseUrl: 'https://jsonplaceholder.typicode.com/posts?_limit=4&_page=1',\r\n  isLoading: false,\r\n  fetchedPosts: [],\r\n  filteredPosts: [],\r\n  errMsg: null,\r\n};\r\n\r\nconst GlobalContext = createContext(initialState);\r\n\r\nconst GlobalProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(appReducer, initialState);\r\n  const { baseUrl, fetchedPosts } = state;\r\n\r\n  const setIsLoading = () => dispatch({ type: SET_IS_LOADING });\r\n\r\n  const fetchPosts = async () => {\r\n    try {\r\n      const res = await axios.get(baseUrl);\r\n      setTimeout(\r\n        () => dispatch({ type: GET_POSTS, payload: res.data }),\r\n        fetchedPosts.length === 0 ? 2000 : 1000\r\n      );\r\n    } catch (err) {\r\n      dispatch({\r\n        type: SET_ERR_MSG,\r\n        payload: `There was an error: ${err.message}.`,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{ ...state, setIsLoading, fetchPosts, dispatch }}\r\n    >\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n\r\nexport { GlobalContext, GlobalProvider };\r\n","import React from 'react';\r\n\r\nconst SinglePost = ({ title, body, postNum }) => (\r\n  <div className=\"post\">\r\n    <div className=\"post__id\">{postNum}</div>\r\n    <div className=\"post__title\">{title}</div>\r\n    <div className=\"post__body\">{body}</div>\r\n  </div>\r\n);\r\n\r\nexport default SinglePost;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport { GlobalContext } from '../contexts/GlobalContext';\r\nimport SinglePost from './SinglePost';\r\n\r\nconst Posts = () => {\r\n  const {\r\n    isLoading,\r\n    filteredPosts,\r\n    errMsg,\r\n    setIsLoading,\r\n    fetchPosts,\r\n  } = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    setIsLoading();\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  console.log(isLoading);\r\n\r\n  return (\r\n    <div className=\"posts-container\">\r\n      {isLoading && <h3>LOADING...</h3>}\r\n      {errMsg && <h3>{errMsg} Please try refreshing</h3>}\r\n      {filteredPosts &&\r\n        filteredPosts.map(({ id, title, body }) => (\r\n          <SinglePost key={id} postNum={id} title={title} body={body} />\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Posts;\r\n","import React from 'react';\r\n\r\nconst Footer = () => (\r\n  <footer className=\"footer\" title=\"Visit GitHub page\">\r\n    &copy;{' '}\r\n    <a\r\n      className=\"link--github\"\r\n      href=\"https://github.com/xandert93\"\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n    >\r\n      xandert.93\r\n    </a>\r\n  </footer>\r\n);\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nconst Header = () => <h1 className=\"header\">Infinite Scroll Blog</h1>;\r\n\r\nexport default Header;\r\n","import { useContext, useEffect, useState } from 'react';\r\nimport { GlobalContext } from '../../contexts/GlobalContext';\r\n\r\nconst Loader = () => {\r\n  let { filteredPosts, fetchPosts } = useContext(GlobalContext);\r\n  const [showLoader, setShowLoader] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      filteredPosts.length !== 0 &&\r\n      document.querySelector('input').value === '' &&\r\n      filteredPosts.length !== 100\r\n    ) {\r\n      let allPosts = document.querySelectorAll('.post');\r\n      let lastPost = allPosts[filteredPosts.length - 1];\r\n      const handleIntersection = ([firstEntry]) => {\r\n        if (firstEntry.isIntersecting) {\r\n          setTimeout(fetchPosts);\r\n          setShowLoader(true);\r\n          setTimeout(setShowLoader, 1000, false);\r\n          myObserver.unobserve(lastPost);\r\n        }\r\n      };\r\n      let myObserver = new IntersectionObserver(handleIntersection, {\r\n        threshold: 1,\r\n      });\r\n      myObserver.observe(lastPost);\r\n    }\r\n  }, [filteredPosts]);\r\n\r\n  return (\r\n    <div className={`loader ${showLoader ? 'show' : ''}`}>\r\n      <div className=\"circle\"></div>\r\n      <div className=\"circle\"></div>\r\n      <div className=\"circle\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import { useState, useEffect } from 'react';\r\nimport { SEARCH_CHANGE } from '../reducer/actions';\r\n\r\nconst useSearchChange = (dispatch) => {\r\n  const [searchField, setSearchField] = useState('');\r\n\r\n  const handleSearchChange = (e) => setSearchField(e.target.value);\r\n\r\n  useEffect(\r\n    () =>\r\n      dispatch({\r\n        type: SEARCH_CHANGE,\r\n        payload: searchField.toLowerCase(),\r\n      }),\r\n    [searchField]\r\n  );\r\n\r\n  return [searchField, handleSearchChange];\r\n};\r\n\r\nexport default useSearchChange;\r\n","import React, { useContext, useRef } from 'react';\r\nimport { GlobalContext } from '../contexts/GlobalContext';\r\nimport useSearchChange from '../customHooks/useSearchChange';\r\n\r\nconst SearchBar = () => {\r\n  const inputRef = useRef();\r\n  let { dispatch } = useContext(GlobalContext);\r\n  const [searchField, handleSearchChange] = useSearchChange(dispatch);\r\n\r\n  return (\r\n    <div className=\"search-input-container\">\r\n      <input\r\n        ref={inputRef}\r\n        value={searchField}\r\n        onChange={handleSearchChange}\r\n        className=\"search-input\"\r\n        placeholder=\"Filter results...\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n","import './App.css';\nimport Posts from './components/Posts';\nimport Footer from './components/layout/Footer';\nimport Header from './components/layout/Header';\nimport Loader from './components/layout/Loader';\nimport SearchBar from './components/SearchBar';\n\nimport { GlobalProvider } from './contexts/GlobalContext';\n\nconst App = () => (\n  <GlobalProvider>\n    <Header />\n    <SearchBar />\n    <Posts />\n    <Loader />\n    <Footer />\n  </GlobalProvider>\n);\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}