{"version":3,"sources":["contexts/globalContext.js","components/SinglePost.js","components/Posts.js","components/layout/Footer.js","components/layout/Header.js","components/layout/Loader.js","components/SearchBar.js","App.js","reducer/actions.js","reducer/appReducer.js","contexts/GlobalProvider.js","index.js"],"names":["initialState","urlPage","baseUrl","isLoading","fetchedPosts","filteredPosts","errMsg","globalContext","createContext","SinglePost","title","body","postNum","observePost","ref","className","Posts","inputRef","useContext","setLoading","fetchPosts","observerRef","useRef","useCallback","node","current","IntersectionObserver","handleIntersection","threshold","includes","length","value","observe","firstEntry","isIntersecting","unobserve","target","map","id","Footer","href","rel","Header","Loader","SearchBar","filterPosts","useState","userInput","setUserInput","useEffect","onChange","e","placeholder","style","pointerEvents","App","SET_LOADING","GET_POSTS","FILTER_POSTS","SET_ERR_MSG","appReducer","state","action","type","payload","filter","GlobalProvider","children","useReducer","dispatch","a","axios","get","res","setTimeout","data","message","Provider","toLowerCase","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d306ff5f.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nexport const initialState = {\r\n  urlPage: 1,\r\n  baseUrl: 'https://jsonplaceholder.typicode.com/posts?_limit=4&_page=1',\r\n  isLoading: true, //start true so to prevent extra re-render of Provider\r\n  fetchedPosts: [],\r\n  filteredPosts: [],\r\n  errMsg: null,\r\n};\r\n\r\nexport const globalContext = createContext();\r\n","import React from 'react';\r\n\r\nconst SinglePost = ({ title, body, postNum, observePost }) => (\r\n  <div ref={observePost} className=\"post\">\r\n    <div className=\"post__id\">{postNum}</div>\r\n    <div className=\"post__title\">{title}</div>\r\n    <div className=\"post__body\">{body}</div>\r\n  </div>\r\n);\r\n\r\nexport default SinglePost;\r\n","import React, { useCallback, useContext, useRef } from 'react';\r\nimport { globalContext } from '../contexts/globalContext';\r\nimport SinglePost from './SinglePost';\r\n\r\nconst Posts = ({ inputRef }) => {\r\n  const { filteredPosts, setLoading, fetchPosts } = useContext(globalContext);\r\n\r\n  const observerRef = useRef();\r\n\r\n  const observePost = useCallback(\r\n    (node) => {\r\n      if (!node) return;\r\n      observerRef.current = new IntersectionObserver(handleIntersection, {\r\n        threshold: 1,\r\n      });\r\n      let check =\r\n        ![0, 100].includes(filteredPosts.length) && !inputRef.current.value;\r\n      if (check) observerRef.current.observe(node);\r\n    },\r\n    [filteredPosts]\r\n  );\r\n\r\n  const handleIntersection = ([firstEntry]) => {\r\n    if (firstEntry.isIntersecting) {\r\n      setLoading();\r\n      fetchPosts();\r\n      observerRef.current.unobserve(firstEntry.target);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"posts-container\">\r\n      {filteredPosts.map(({ id, title, body }) => (\r\n        <SinglePost\r\n          key={id}\r\n          postNum={id}\r\n          title={title}\r\n          body={body}\r\n          observePost={id === filteredPosts.length ? observePost : null}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Posts;\r\n","import React from 'react';\r\n\r\nconst Footer = () => (\r\n  <footer className=\"footer\" title=\"Visit GitHub page\">\r\n    &copy;{' '}\r\n    <a\r\n      className=\"link--github\"\r\n      href=\"https://github.com/xandert93\"\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n    >\r\n      xandert.93\r\n    </a>\r\n  </footer>\r\n);\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nconst Header = () => <h1 className=\"header\">Infinite Scroll Blog</h1>;\r\n\r\nexport default Header;\r\n","const Loader = () => {\r\n  return (\r\n    <div className=\"loader\">\r\n      <div className=\"circle\"></div>\r\n      <div className=\"circle\"></div>\r\n      <div className=\"circle\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { globalContext } from '../contexts/globalContext';\r\n\r\nconst SearchBar = ({ inputRef }) => {\r\n  let { filterPosts, isLoading } = useContext(globalContext);\r\n  const [userInput, setUserInput] = useState('');\r\n\r\n  // eslint-disable-next-line\r\n  useEffect(() => filterPosts(userInput), [userInput]);\r\n\r\n  return (\r\n    <div className=\"search-input-container\">\r\n      <input\r\n        ref={inputRef}\r\n        value={userInput}\r\n        onChange={(e) => setUserInput(e.target.value)}\r\n        className=\"search-input\"\r\n        placeholder=\"Filter results...\"\r\n        style={{ pointerEvents: `${isLoading ? 'none' : ''}` }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n","import './App.scss';\nimport Posts from './components/Posts';\nimport Footer from './components/layout/Footer';\nimport Header from './components/layout/Header';\nimport Loader from './components/layout/Loader';\nimport SearchBar from './components/SearchBar';\n\nimport { useContext, useEffect, useRef } from 'react';\nimport { globalContext } from './contexts/globalContext';\n\nconst App = () => {\n  const { isLoading, urlPage, filteredPosts, fetchPosts } = useContext(\n    globalContext\n  );\n  const inputRef = useRef();\n\n  useEffect(fetchPosts, []);\n\n  return (\n    <>\n      <Header />\n      <SearchBar inputRef={inputRef} />\n      {urlPage === 1 && <Loader />}\n      {filteredPosts.length > 0 && (\n        <>\n          <Posts inputRef={inputRef} />\n          {isLoading && <Loader />}\n        </>\n      )}\n      <Footer />\n    </>\n  );\n};\n\nexport default App;\n","export const SET_LOADING = 'SET_LOADING';\r\nexport const GET_POSTS = 'GET_POSTS';\r\nexport const FILTER_POSTS = 'FILTER_POSTS';\r\nexport const SET_ERR_MSG = 'SET_ERR_MSG';\r\n","import { SET_LOADING, GET_POSTS, FILTER_POSTS, SET_ERR_MSG } from './actions';\r\n\r\nexport const appReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case GET_POSTS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        fetchedPosts: [...state.fetchedPosts, ...action.payload],\r\n        filteredPosts: [...state.fetchedPosts, ...action.payload],\r\n        urlPage: state.urlPage + 1,\r\n        baseUrl: `https://jsonplaceholder.typicode.com/posts?_limit=4&_page=${\r\n          state.urlPage + 1\r\n        }`,\r\n      };\r\n    case FILTER_POSTS:\r\n      return {\r\n        ...state,\r\n        filteredPosts: state.fetchedPosts.filter(\r\n          ({ title, body }) =>\r\n            title.includes(action.payload) || body.includes(action.payload)\r\n        ),\r\n      };\r\n    case SET_ERR_MSG:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        fetchedPosts: [],\r\n        errMsg: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { globalContext, initialState } from './globalContext';\r\nimport { useReducer } from 'react';\r\nimport { appReducer } from '../reducer/appReducer';\r\nimport axios from 'axios';\r\n\r\nimport {\r\n  GET_POSTS,\r\n  SET_ERR_MSG,\r\n  FILTER_POSTS,\r\n  SET_LOADING,\r\n} from '../reducer/actions';\r\n\r\nconst GlobalProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(appReducer, initialState);\r\n  const { baseUrl, fetchedPosts } = state;\r\n\r\n  const fetchPosts = async () => {\r\n    try {\r\n      const res = await axios.get(baseUrl);\r\n      setTimeout(\r\n        () => dispatch({ type: GET_POSTS, payload: res.data }),\r\n        fetchedPosts.length === 0 ? 3000 : 2000\r\n      );\r\n    } catch (err) {\r\n      dispatch({\r\n        type: SET_ERR_MSG,\r\n        payload: `There was an error: ${err.message}.`,\r\n      });\r\n    }\r\n  };\r\n\r\n  const setLoading = () => dispatch({ type: SET_LOADING });\r\n\r\n  const filterPosts = (userInput) =>\r\n    dispatch({\r\n      type: FILTER_POSTS,\r\n      payload: userInput.toLowerCase(),\r\n    });\r\n\r\n  return (\r\n    <globalContext.Provider\r\n      value={{ ...state, fetchPosts, setLoading, filterPosts }}\r\n    >\r\n      {children}\r\n    </globalContext.Provider>\r\n  );\r\n};\r\n\r\nexport { GlobalProvider };\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { GlobalProvider } from './contexts/GlobalProvider';\n\nReactDOM.render(\n  <GlobalProvider>\n    <App />\n  </GlobalProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}