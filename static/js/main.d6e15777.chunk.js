(this["webpackJsonpinfinite-scroll-blog"]=this["webpackJsonpinfinite-scroll-blog"]||[]).push([[0],{24:function(e,t,c){},42:function(e,t,c){"use strict";c.r(t);var s=c(0),r=c(1),a=c(17),n=c.n(a),o=(c(24),c(3)),i=c(6),l=c(4),u="SEARCH_CHANGE",j="GET_POSTS",b="ERROR",d="GET_MORE_POSTS",O=function(e,t){switch(t.type){case j:return Object(l.a)(Object(l.a)({},e),{},{posts:[].concat(Object(i.a)(e.posts),Object(i.a)(t.payload)),filteredPosts:[].concat(Object(i.a)(e.posts),Object(i.a)(t.payload))});case d:return Object(l.a)(Object(l.a)({},e),{},{urlPage:e.urlPage+1,base_url:"https://jsonplaceholder.typicode.com/posts?_limit=4&_page=".concat(e.urlPage+1)});case u:return Object(l.a)(Object(l.a)({},e),{},{filteredPosts:e.posts.filter((function(e){var c=e.title,s=e.body;return c.includes(t.payload)||s.includes(t.payload)}))});case b:return Object(l.a)(Object(l.a)({},e),{},{posts:[],hasError:t.payload});default:return e}},h={urlPage:1,base_url:"https://jsonplaceholder.typicode.com/posts?_limit=4&_page=1",posts:[],filteredPosts:[],hasError:!1},p=Object(r.createContext)(h),f=function(e){var t=e.children,c=Object(r.useReducer)(O,h),a=Object(o.a)(c,2),n=a[0],i=a[1];return Object(s.jsx)(p.Provider,{value:{state:n,dispatch:i},children:t})},x=c(18),v=function(e,t){Object(r.useEffect)((function(){return setTimeout((function(){Object(x.get)(e).then((function(e){t({type:"GET_POSTS",payload:e.data})})).catch((function(e){return t({type:"ERROR",payload:"There was an error."})}))}),700)}),[e,t])};var m=function(e){var t=e.title,c=e.body,r=e.postNum;return Object(s.jsxs)("div",{className:"post-container",children:[Object(s.jsx)("div",{className:"post-id",children:r}),Object(s.jsx)("div",{className:"post-title",children:t}),Object(s.jsx)("div",{className:"post-body",children:c})]})},y=function(){var e=Object(r.useContext)(p),t=e.state,c=e.dispatch,a=t.filteredPosts,n=t.hasError,o=t.base_url;return v(o,c),Object(s.jsx)("div",{className:"posts-container",children:0===a.length?Object(s.jsx)("h3",{children:"LOADING..."}):n?Object(s.jsx)("h3",{children:"Please try refreshing"}):a.map((function(e){var t=e.id,c=e.title,r=e.body;return Object(s.jsx)(m,{postNum:t,title:c,body:r},t)}))})};var g=function(){return Object(s.jsxs)("footer",{className:"footer",title:"Visit GitHub page",children:["\xa9"," ",Object(s.jsx)("a",{href:"https://github.com/xandert93",target:"_blank",rel:"noopener noreferrer",children:"xandert.93"})]})},N=function(){return Object(s.jsx)("h1",{className:"header",children:"My Blog"})},E=function(){var e=Object(r.useContext)(p),t=e.state,c=e.dispatch,s=t.filteredPosts,a=Object(r.useState)(!1),n=Object(o.a)(a,2),i=n[0],l=n[1];return Object(r.useEffect)((function(){if(0!==s.length&&""===document.querySelector("input").value&&100!==s.length){var e=document.querySelectorAll(".post-container")[s.length-1],t=new IntersectionObserver((function(s){s[0].isIntersecting&&(c({type:"GET_MORE_POSTS"}),l(!0),setTimeout(l,500,!1),t.unobserve(e))}),{threshold:1});t.observe(e)}}),[s]),[i]},_=function(){var e=E(),t=Object(o.a)(e,1)[0];return Object(s.jsxs)("div",{className:"loader ".concat(t&&"show"),children:[Object(s.jsx)("div",{className:"circle"}),Object(s.jsx)("div",{className:"circle"}),Object(s.jsx)("div",{className:"circle"})]})},P=function(e){var t=Object(r.useState)(""),c=Object(o.a)(t,2),s=c[0],a=c[1];return Object(r.useEffect)((function(){return e({type:"SEARCH_CHANGE",payload:s.toLowerCase()})}),[s]),[s,function(e){return a(e.target.value)}]},S=function(){var e=Object(r.useContext)(p).dispatch,t=P(e),c=Object(o.a)(t,2),a=c[0],n=c[1],i=Object(r.useRef)();return Object(s.jsxs)("div",{className:"search-input-container",children:[Object(s.jsx)("input",{ref:i,value:a,onChange:n,className:"search-input",placeholder:"Filter results..."}),Object(s.jsx)("button",{className:"search-btn",children:Object(s.jsx)("i",{className:"fas fa-search"})})]})},R=function(){return Object(s.jsxs)(f,{children:[Object(s.jsx)(N,{}),Object(s.jsx)(S,{}),Object(s.jsx)(y,{}),Object(s.jsx)(_,{}),Object(s.jsx)(g,{})]})};n.a.render(Object(s.jsx)(R,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.d6e15777.chunk.js.map